请给出一些C++程序设计指南和建议，包括头文件，源文件划分，类设计，功能设计等等，仅给出声明，不给出实现。

我想要完成一个基于命令行的LED控制系统，以后我将会在别的项目中使用命令行，所以我希望命令行能和LED控制的功能去耦合。

LED系统介绍：
在这个控制系统中，通过串口发送30个0-255的数字来控制30个LED灯的强度，数据包的包头是0xAD 0xDA，即一次发送32个控制。而我现在要做的就是基于命令行来调整这30个灯的强度数据以便于调试。

对于每一个LED灯，它应该有一个独立的强度上限x（介于0-255，默认255）之间，当我想让它生成随机强度时，它应该在0-x之间生成随机强度而不是0-255. 同时每一个LED灯有其自己的光谱峰位值和强度255时的光辐射强度。我希望每个灯能够有一个峰位和序号之间的键关系，这样我既可以通过序号来控制也可以通过峰位来控制。

具体要求如下：
命令行有以下命令（你可以补充一些我没想到的命令），对于所有的非法命令，都应该有提示文本和错误处理：
ls：以列表的形式输出30个灯的详细信息
set l<x> y:将序号为x的灯设置为强度y
set x y：将峰位为x的设置为强度y
setm l<x> y:将序号为x的灯强度上限设置为y
setm x y：将峰位为x的强度上限设置为y
random：基于当前强度上限生成一组随机的灯强度
send COM<X>：向串口X发送当前的强度数据
do COM<X> Y：即random命令+send COM<X>执行Y次，每次间隔1秒
save：将强度上限保存到一个特定的文件
load：从特定的文件读取强度上限


